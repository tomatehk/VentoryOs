{% extends "bases/base.html" %}

{% block body %}

{% if not registry %}
    <div class="container jumbotron text-center">
        <h1 class="text-center">Registro de ventas vacío <i class="fa fa-exclamation-triangle"></i></h1>
    </div>
{% else %}
<div class="container">
<h1 class="text-center">Registro de ventas <i class="fa fa-list-alt"></i></h1>
<br />
<div class="container text-center">
<form class="form-inline" role="form" method="POST">
    <div class="input-group">
        <span class="input-group-addon"><i class="fa fa-user"></i></span>
        <input type="text" class="form-control" id="ejemplo_email_2" placeholder="C.I: Ejemplo 12345" name="c-i">
    </div>
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <button type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top" title="Buscar"><span class="glyphicon glyphicon-search"></span></button>
</form>
</div>
<br />
<table class="table table-bordered text-center">
    <thead>
        <tr class="orange-color">
            <th class="text-center">Artículo <i class="fa fa-th-large"></i></th>
            <th class="text-center">Cantidad <i class="fa fa-hashtag"></i></th>
            <th class="text-center">Precio <i class="fa fa-dollar"></i></th>
            <th class="text-center">Cliente <i class="fa fa-id-card"></i></th>
            <th class="text-center">Fecha <i class="fa fa-calendar"></i></th>
        </tr>
    </thead>
    <tbody>
    {% for x in registry %}
    <tr>
        <td>{{ x.article }}</td>
        <td>{{ x.quantity }}</td>
        <td>{{ format(x.price) }}</td>
        <td>{{ x.client }}</td>
        <td>{{ x.pub_date | datetimeformat }}</td>
    </tr>
    {% endfor %}
    <tr class="blue-color font-white">
        <td colspan="5"><b>Total ventas: Bs {{ format(get_total_money()) }}</b></td>
    </tr>
    </tbody>
</table>
    <ul class="pager">
    {% if registry.has_previous() %}
        <li class="previous"><a href="?page={{ registry.previous_page_number() }}"><i class="fa fa-chevron-circle-left"></i> Anterior</a></li>
    {% else %}
        <li class="previous disabled"><a href="#pagination"><i class="fa fa-chevron-circle-left"></i> Anterior</a></li>
    {% endif %}

    <ul class="pagination" id="pagination">
        {% for x in range(1, 1+registry.paginator.num_pages) %}
            {% if x == registry.number %}
                <li class="active"><a href="#pagination">{{ x }}</a></li>
            {% else %}
                <li><a href="?page={{ x }}">{{ x }}</a></li>
            {% endif %}
        {% endfor %}
    </ul>

    {% if registry.has_next() %}
        <li class="next"><a href="?page={{ registry.next_page_number() }}">Siguiente <i class="fa fa-chevron-circle-right"></i></a></li>
    {% else %}
        <li class="next disabled"><a href="#pagination">Siguiente <i class="fa fa-chevron-circle-right"></i></a></li>
    {% endif %}
    </ul>
</div>
<br />
<br />
<br />
{% endif %}
{% endblock %}